<div class="content">

    <div class="header">
        <h1>Telemetry Data</h1>
    </div>

    <mat-tab-group>
        <mat-tab label="User Sessions">
            <div class="table-container mat-elevation-z8">
                <cdk-virtual-scroll-viewport itemSize="50" class="table-viewport">


                    <table mat-table [dataSource]="userSessionDataSource" #sortUserSession="matSort" matSort
                        class="mat-elevation-z8">

                        <ng-container matColumnDef="_id">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">Object ID</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyUserSessionFilter($event, '_id')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let session"> {{session._id}} </td>
                        </ng-container>

                        <ng-container matColumnDef="_created_at">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title"> Created At</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyUserSessionFilter($event, '_created_at')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let session">
                                {{session._created_at}}
                            </td>

                        </ng-container>

                        <ng-container matColumnDef="_updated_at">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">Updated At</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyUserSessionFilter($event, '_updated_at')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let session">
                                {{ session._updated_at }}
                            </td>

                        </ng-container>


                        <ng-container matColumnDef="fmd_id">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">FMD ID</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyUserSessionFilter($event, 'fmd_id')"
                                            placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let session"> {{session.fmd_id}} </td>
                        </ng-container>

                        <ng-container matColumnDef="session">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">Session</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyUserSessionFilter($event, 'session')"
                                            placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let session"> {{session.session}} </td>
                        </ng-container>

                        <ng-container matColumnDef="endpoints">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">Endpoints</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyUserSessionFilter($event, 'endpoints')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let session"> {{session.endpoints}} </td>
                        </ng-container>

                        <ng-container matColumnDef="blueprints">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">Blueprints</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyUserSessionFilter($event, 'blueprints')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let session"> {{session.blueprints}} </td>
                        </ng-container>

                        <ng-container matColumnDef="monitoring_0">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">Monitoring 0</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyUserSessionFilter($event, 'monitoring_0')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let session"> {{session.monitoring_0}} </td>
                        </ng-container>

                        <ng-container matColumnDef="monitoring_1">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">Monitoring 1</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyUserSessionFilter($event, 'monitoring_1')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let session"> {{session.monitoring_1}} </td>
                        </ng-container>

                        <ng-container matColumnDef="monitoring_2">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">
                                        Monitoring 2</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyUserSessionFilter($event, 'monitoring_2')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let session"> {{session.monitoring_2}} </td>
                        </ng-container>

                        <ng-container matColumnDef="monitoring_3">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">Monitoring 3</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyUserSessionFilter($event, 'monitoring_3')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let session"> {{session.monitoring_3}} </td>
                        </ng-container>

                        <ng-container matColumnDef="dashboard_version">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">FMD Version</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyUserSessionFilter($event, 'dashboard_version')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let session"> {{session.dashboard_version}} </td>
                        </ng-container>

                        <ng-container matColumnDef="time_initialized">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">Time Initialized</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyUserSessionFilter($event, 'time_initialized')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let session"> {{session.time_initialized}} </td>
                        </ng-container>


                        <tr mat-header-row *matHeaderRowDef="userSessionDisplayedColumns; sticky: true"></tr>
                        <tr mat-row *matRowDef="let session; columns: userSessionDisplayedColumns;"></tr>
                    </table>
                </cdk-virtual-scroll-viewport>
            </div>
        </mat-tab>

        <mat-tab label="Endpoints">
            <div class="table-container mat-elevation-z8">
                <cdk-virtual-scroll-viewport itemSize="50" class="table-viewport">
                    <table mat-table [dataSource]="endpointsDataSource" #sortEndpoints="matSort" matSort
                        class="mat-elevation-z8">
                        <ng-container matColumnDef="_id">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title"> Object ID</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyEndpointsFilter($event, '_id')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let endpoint"> {{endpoint._id}} </td>
                        </ng-container>

                        <ng-container matColumnDef="_created_at">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title"> Created At</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyEndpointsFilter($event, '_created_at')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let endpoint">
                                {{endpoint._created_at}}
                            </td>

                        </ng-container>

                        <ng-container matColumnDef="_updated_at">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">Updated At </div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyEndpointsFilter($event, '_updated_at')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let endpoint">
                                {{endpoint._updated_at}}
                            </td>

                        </ng-container>

                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">Name</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyEndpointsFilter($event, 'name')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let endpoint"> {{endpoint.name}} </td>
                        </ng-container>

                        <ng-container matColumnDef="fmd_id">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title"> FMD ID</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyEndpointsFilter($event, 'fmd_id')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let endpoint"> {{endpoint.fmd_id}} </td>
                        </ng-container>

                        <ng-container matColumnDef="session">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">Session</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyEndpointsFilter($event, 'session')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let endpoint"> {{endpoint.session}} </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="endpointsDisplayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: endpointsDisplayedColumns;"></tr>

                    </table>
                </cdk-virtual-scroll-viewport>
            </div>
        </mat-tab>

        <mat-tab label="Database Pruning">
            <div class="table-container mat-elevation-z8">
                <cdk-virtual-scroll-viewport itemSize="50" class="table-viewport">
                    <table mat-table [dataSource]="databasePruningDataSource" class="mat-elevation-z8">

                        <ng-container matColumnDef="_id">
                            <th mat-header-cell *matHeaderCellDef>
                                <div class="header-with-filter">
                                    <div class="header-title">Object ID</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyDatabasePruningFilter($event, '_id')"
                                            placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let data"> {{data._id}} </td>
                        </ng-container>

                        <!-- Created At Column -->
                        <ng-container matColumnDef="_created_at">
                            <th mat-header-cell *matHeaderCellDef>
                                <div class="header-with-filter">
                                    <div class="header-title">Created At</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyDatabasePruningFilter($event, '_created_at')"
                                            placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let data"> {{data._created_at}} </td>
                        </ng-container>

                        <!-- Updated At Column -->
                        <ng-container matColumnDef="_updated_at">
                            <th mat-header-cell *matHeaderCellDef>
                                <div class="header-with-filter">
                                    <div class="header-title">Updated At</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyDatabasePruningFilter($event, '_updated_at')"
                                            placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let data"> {{data._updated_at}} </td>
                        </ng-container>

                        <!-- FMD ID Column -->
                        <ng-container matColumnDef="fmd_id">
                            <th mat-header-cell *matHeaderCellDef>
                                <div class="header-with-filter">
                                    <div class="header-title">FMD ID</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyDatabasePruningFilter($event, 'fmd_id')"
                                            placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let data"> {{data.fmd_id}} </td>
                        </ng-container>

                        <!-- Session Column -->
                        <ng-container matColumnDef="session">
                            <th mat-header-cell *matHeaderCellDef>
                                <div class="header-with-filter">
                                    <div class="header-title">Session</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyDatabasePruningFilter($event, 'session')"
                                            placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let data"> {{data.session}} </td>
                        </ng-container>

                        <!-- Age Threshold Column -->
                        <ng-container matColumnDef="age_threshold_weeks">
                            <th mat-header-cell *matHeaderCellDef>
                                <div class="header-with-filter">
                                    <div class="header-title">Age Threshold (weeks)</div>
                                    <div class="filter-container">
                                        <input matInput
                                            (keyup)="applyDatabasePruningFilter($event, 'age_threshold_weeks')"
                                            placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let data"> {{data.age_threshold_weeks}} </td>
                        </ng-container>

                        <!-- Delete Custom Graphs Column -->
                        <ng-container matColumnDef="delete_custom_graphs">
                            <th mat-header-cell *matHeaderCellDef>
                                <div class="header-with-filter">
                                    <div class="header-title">Delete Custom Graphs</div>
                                    <div class="filter-container">
                                        <input matInput
                                            (keyup)="applyDatabasePruningFilter($event, 'delete_custom_graphs')"
                                            placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let data"> {{data.delete_custom_graphs}} </td>
                        </ng-container>

                        <!-- Row Definitions -->
                        <tr mat-header-row *matHeaderRowDef="databasePruningDisplayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: databasePruningDisplayedColumns;"></tr>

                    </table>
                </cdk-virtual-scroll-viewport>
            </div>
        </mat-tab>


        <mat-tab label="FollowUp">
            <div class="table-container mat-elevation-z8">
                <cdk-virtual-scroll-viewport itemSize="50" class="table-viewport">
                    <table mat-table [dataSource]="followUpDataSource" #sortFollowUp="matSort" matSort
                        class="mat-elevation-z8">
                        <ng-container matColumnDef="_id">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title"> Object ID</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyFollowUpFilter($event, '_id')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let followUp"> {{followUp._id}} </td>
                        </ng-container>

                        <ng-container matColumnDef="_created_at">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title"> Created At</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyFollowUpFilter($event, '_created_at')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let followUp">
                                {{followUp._created_at}}
                            </td>

                        </ng-container>

                        <ng-container matColumnDef="_updated_at">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">Updated At </div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyFollowUpFilter($event, '_updated_at')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let followUp">
                                {{followUp._updated_at}}
                            </td>

                        </ng-container>

                        <ng-container matColumnDef="feedback">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">Feedback</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyFollowUpFilter($event, 'feedback')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let followUp"> {{followUp.feedback}} </td>
                        </ng-container>

                        <ng-container matColumnDef="fmd_id">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title"> FMD ID</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyFollowUpFilter($event, 'fmd_id')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let followUp"> {{followUp.fmd_id}} </td>
                        </ng-container>

                        <ng-container matColumnDef="session">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                <div class="header-with-filter">
                                    <div class="header-title">Session</div>
                                    <div class="filter-container">
                                        <input matInput (keyup)="applyFollowUpFilter($event, 'session')"
                                            (click)="stopPropagation($event)" placeholder=" ">
                                    </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let followUp"> {{followUp.session}} </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="followUpDisplayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: followUpDisplayedColumns;"></tr>

                    </table>
                </cdk-virtual-scroll-viewport>
            </div>
        </mat-tab>

    </mat-tab-group>
</div>